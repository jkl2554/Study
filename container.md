# container

## podman 명령어
```s
podman run -dt -p <hostport>:<targetport> -e <env> -v <directory>:<container directory>:<volume options> --name <container name>
vulume options: ro, rw
```
## podman pod
Container생성 시 pod 생성 가능, 같은 pod 내에서는 네트워크 공유
```s
podman run -dt --pod new:<mypod> --name mycontainer1 ubuntu
podman run -dt --pod <mypod> --name mycontainer2 ubuntu
```
두개 container는 동일한 네트워크 사용. ip 및 port 공유

## podman generate  
podman 은 서비스 generate 가능

```s
# podman generate systemd myapp  > /etc/systemd/system/myapp.service -> Podman 서비스 생성(root)  systemctl enable myapp
# podman generate systemd myapp  > ~/.config/systemd/user/myapp.service -> Podman 서비스 생성(user) systemctl --user enable myapp
```

myapp.service
```s
# container-523a85441de0fcf947b9f3ee4c2f2e817ef554c941e08d9e2bd047512db562f3.service
# autogenerated by Podman 3.4.2
# Wed Jan 19 01:39:52 UTC 2022

[Unit]
Description=Podman container-523a85441de0fcf947b9f3ee4c2f2e817ef554c941e08d9e2bd047512db562f3.service
Documentation=man:podman-generate-systemd(1)
Wants=network-online.target
After=network-online.target
RequiresMountsFor=/run/user/1000/containers

[Service]
Environment=PODMAN_SYSTEMD_UNIT=%n
Restart=on-failure
TimeoutStopSec=70
ExecStart=/usr/bin/podman start 523a85441de0fcf947b9f3ee4c2f2e817ef554c941e08d9e2bd047512db562f3
ExecStop=/usr/bin/podman stop -t 10 523a85441de0fcf947b9f3ee4c2f2e817ef554c941e08d9e2bd047512db562f3
ExecStopPost=/usr/bin/podman stop -t 10 523a85441de0fcf947b9f3ee4c2f2e817ef554c941e08d9e2bd047512db562f3
PIDFile=/run/user/1000/containers/overlay-containers/523a85441de0fcf947b9f3ee4c2f2e817ef554c941e08d9e2bd047512db562f3/userdata/conmon.pid
Type=forking

[Install]
WantedBy=multi-user.target default.target
```
